/*! snip2me - v0.1.0 - 2012-12-14
* http://snip2.me/
* Copyright (c) 2011-2012 Oleksii Glib; Licensed MIT */
(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt={}.hasOwnProperty,nt=function(e,t){function r(){this.constructor=e}for(var n in t)tt.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};(Q=(X=Array.prototype).some)==null&&(X.some=function(e){var t,n,r;for(n=0,r=this.length;n<r;n++){t=this[n];if(e(t))return!0}return!1}),(G=(V=Array.prototype).every)==null&&(V.every=function(e){var t,n,r;for(n=0,r=this.length;n<r;n++){t=this[n];if(!e(t))return!1}return!0}),(Y=($=String.prototype).toImg)==null&&($.toImg=function(){var e;return e=document.createElement("img"),e.src=this,e}),(Z=(J=String.prototype).trim)==null&&(J.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),(et=(K=String.prototype).dashToCamel)==null&&(K.dashToCamel=function(){return this.replace(/\W+(.)/g,function(e,t){return t.toUpperCase()})}),e=function(){function e(){}return e.prototype.match=function(e,t,n){return!1},e.prototype.performAction=function(e,t,n,r){return r(e),e=null,r(new q),e},e}(),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.match=function(e,t,n){return t===null&&e.current()==="/"&&e.fetchNext()==="/"},t.prototype.performAction=function(e,t,n,r){return t.readUntilCharsLast(!1,"\r","\n"),r(new O("/"+t.buffer)),e},t}(e),u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.match=function(e,t,n){return t===null&&e.current()==="/"&&e.fetchNext()==="*"},t.prototype.performAction=function(e,t,n,r){return t.readUntil(function(e){return e.current()==="*"&&e.fetchNext()==="/"}),r(new O("/"+t.buffer+"/")),e},t}(e),a=function(e){function t(e){this.delimeters=e!=null?e:null,this.delimeters===null&&(this.delimeters=["{","}","[","]","=",";",":","?","(",")",",","<",">","."])}return nt(t,e),t.prototype.match=function(e,t,n){var r;return r=e.current(),this.delimeters.some(function(e){return r===e})},t.prototype.performAction=function(e,t,n,r){return r(e),e=null,r(new M(t.current())),e},t}(e),c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.match=function(e,t,n){var r;return r=e.current(),r==="\r"||r==="\n"},t.prototype.opposite=function(e){var t;return(t=e==="\r")!=null?t:{"\n":"\r"}},t.prototype.performAction=function(e,t,n,r){return r(e),e=null,r(new D),t.fetchNext()===this.opposite(t.current())&&t.skip(1),e},t}(e),h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.match=function(e,t,n){return e.current()==="	"},t.prototype.performAction=function(e,t,n,r){return r(e),e=null,r(new B),e},t}(e),C=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.match=function(e,t,n){return e.current()===" "},t.prototype.performAction=function(e,t,n,r){return r(e),e=null,r(new F),e},t}(e),k=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.match=function(e,t,n){var r;return r=e.current(),r==='"'||r==="'"},t.prototype.performAction=function(e,t,n,r){var i,s;r(e),e=null,s=t.current(),i=s;for(;;){if(!t.readUntilChars(s)){i+=t.buffer;break}i+=t.buffer;if(i.length===2)break;if(i.substring(i.length-2,i.length-1)==="\\"&&i.substring(i.length-3,i.length-2)!=="\\")continue;break}return r(new I(i)),e},t}(e),R=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.match=function(e,t,n){return t===null&&e.current()==="#"},t.prototype.performAction=function(e,t,n,r){return t.readUntilCharsLast(!1,"\r","\n"),r(new O("#"+t.buffer)),e},t}(e),i=function(){function e(e){this.data=e,this.index=0,this.buffer=""}return e.prototype.current=function(){return this.data.substring(this.index,this.index+1)},e.prototype.fetchPrev=function(e){return e==null&&(e=0),0<=this.index-e?this.data.substring(this.index-e,this.index-e+1):null},e.prototype.skip=function(e){var t;t=this.index+e;if(t>=0&&t<this.data.length)return this.index=t},e.prototype.fetchNext=function(e){return e==null&&(e=0),this.data.length>this.index+e?this.data.substring(this.index+e,this.index+e+1):null},e.prototype.readNext=function(){return this.index+1>=this.data.length?!1:(this.index+=1,!0)},e.prototype.readUntil=function(e,t){t==null&&(t=!0),this.buffer="";while(this.readNext()){if(e(this))return t?this.buffer+=this.current():this.index--,!0;this.buffer+=this.current()}return this.buffer+=this.current()},e.prototype.readUntilChars=function(){var e;return e=Array.prototype.slice.call(arguments),this.readUntil(function(t){return e.some(function(e){return t.current()===e})})},e.prototype.readUntilCharsLast=function(e){var t;return t=Array.prototype.slice.call(arguments),t=t.slice(1),this.readUntil(function(e){return t.some(function(t){return e.current()===t})},e)},e}(),w=function(){function e(e,t){this.color=e!=null?e:"#000000",this.param=t!=null?t:"normal"}return e}(),f=function(){function e(){this.data=[]}return e.prototype.Register=function(e,t,n){var r;return n==null&&(n=null),r={},r.code=e,r.item=t,n!=null?r.title=n:r.title=e,this.data.push(r),!0},e.prototype.Find=function(e){var t,n,r,i;i=this.data;for(n=0,r=i.length;n<r;n++){t=i[n];if(t.code===e)return t.item}return null},e}(),p=function(){function e(e,t,n){this.settings=t,this.scheme=n,this.ctx=e.getContext("2d")}return e.prototype.settings=null,e.prototype.scheme=null,e.prototype.child=null,e.prototype.w=-1,e.prototype.h=-1,e.prototype.pT=0,e.prototype.pB=0,e.prototype.pL=0,e.prototype.pR=0,e.prototype.withChild=function(e){return this.child=e,this},e.prototype.scheme=function(){return this.scheme},e.prototype.measure=function(){var e,t,n,r,i;return r=0,e=0,this.w>0&&(r=this.w),this.h>0&&(e=this.h),this.child!==null&&(i=this.child.measure(),n=i[0],t=i[1],r<n&&(r=n),e+=t),r+=this.pL+this.pR,e+=this.pT+this.pB,[r,e]},e.prototype.paint=function(){return this.paintMe(0,0),this.child!=null&&this.child.paintMe(this.pL,this.pT),null},e.prototype.paintMe=function(e,t){return null},e}(),v=function(e){function t(){t.__super__.constructor.call(this),this.processParams=function(e){var t,n,r,i,s,o,u;t=e.trim().split(","),s="{",n=!0;for(o=0,u=t.length;o<u;o++){i=t[o],r=i.trim().split(":",2);if(r.length!==2)continue;n?n=!1:s+=",",s+='"'+r[0]+'":"'+r[1]+'"'}return s+="}",s}}return nt(t,e),t.prototype.Create=function(e,t,n,r){var i,s,o,u;return i=t.split("=>",2),i.length<1?null:(s=i[0].trim().toLowerCase(),o=this.Find(s),o==null?null:(u={},i.length>1&&(u=JSON.parse(this.processParams(i[1]))),new o(e,u,n,r)))},t}(f),d=new v,m=function(e){function t(e,n,r,i){this.params=n,t.__super__.constructor.call(this,e,r,i),this.initialize()}return nt(t,e),t.prototype.get=function(e,t){var n;return t==null&&(t=null),this.params[e]!=null?this.params[e]:(n=this.scheme.get(e),n!=null?n.color:t)},t.prototype.setIfNull=function(e,t){return this.params[e]==null&&(this.params[e]=t),!0},t.prototype.initialize=function(){return null},t}(p),x=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.defRad=5,t.prototype.defOffset=1,t.prototype.initialize=function(){var e;return this.setIfNull("radius",0),this.setIfNull("width",1),e=parseInt(this.get("radius")),e<=this.defRad?e=this.defRad+this.defOffset:e+=this.defOffset,this.pL=e,this.pT=e,this.pB=e,this.pR=e},t.prototype.paintMe=function(e,t){var n,r,i,s,o,u,a,f,l,c,h;return i=0,r=0,this.child!=null&&(h=this.child.measure(),i=h[0],r=h[1]),s=this.defOffset,o=2*this.defOffset,a=e+s,l=t+s,f=e+i+this.pL+this.pR-o,c=t+r+this.pT+this.pB-o,u=parseInt(this.get("radius")),this.ctx.beginPath(),this.ctx.moveTo(a+u,l),this.ctx.lineTo(f-u,l),this.ctx.quadraticCurveTo(f,l,f,l+u),this.ctx.lineTo(f,c-u),this.ctx.quadraticCurveTo(f,c,f-u,c),this.ctx.lineTo(a+u,c),this.ctx.quadraticCurveTo(a,c,a,c-u),this.ctx.lineTo(a,l+u),this.ctx.quadraticCurveTo(a,l,a+u,l),this.ctx.closePath(),this.ctx.strokeStyle=this.get("fg","#000000"),this.ctx.lineWidth=parseInt(this.get("width")),this.ctx.stroke(),n=this.get("bg","transparent"),n!=="transparent"&&(this.ctx.fillStyle=n,this.ctx.fill()),null},t}(m),d.Register("border",x),r=function(e){function t(e,n,r,i){var s;this.tokens=n,t.__super__.constructor.call(this,e,i,r),s=this.calculate(),this.w=s[0],this.h=s[1]}return nt(t,e),t.prototype.withChild=function(e){return this.child=null,this},t.prototype.calculate=function(){var e,t,n,r,i,s,o,u,a,f,l;i=0,r=0,e=0,t=0,f=this.tokens;for(u=0,a=f.length;u<a;u++){s=f[u],l=this.measureToken(s),o=l[0],n=l[1],t+=o;if(s instanceof D){e<n&&(e=n),r+=e,i<t&&(i=t),e=0,t=0;continue}}return r+=e,i<t&&(i=t),i<this.settings.minWidth&&(i=this.settings.minWidth),[i,r]},t.prototype.prepareContextForText=function(e){var t;return t=this.scheme.get("text-"+e),t===null&&(t=this.scheme.get("text-normal")),t===null&&(t=new w),this.ctx.textBaseline="top",this.ctx.textAlign="left",this.ctx.font=t.param+" "+this.scheme.size+"px "+this.scheme.font,this.ctx.fillStyle=t.color,this.scheme.size},t.prototype.measureToken=function(e){var t,n,r;return t=e.content,e instanceof F&&(t=" "),r=this.prepareContextForText(e.code()),n=this.ctx.measureText(t),[Math.round(n.width),r]},t.prototype.drawToken=function(e,t,n){var r,i,s;return r=e.content,e instanceof F&&(r=" "),s=this.prepareContextForText(e.code()),i=this.ctx.measureText(r),this.ctx.fillText(r,t,n),[Math.round(i.width),s]},t.prototype.paintMe=function(e,t){var n,r,i,s,o,u,a,f,l,c;i=e,s=t,n=0,l=this.tokens;for(a=0,f=l.length;a<f;a++){o=l[a],c=this.drawToken(o,i,s),u=c[0],r=c[1],n<r&&(n=r),i+=u;if(o instanceof D){i=e,s+=n;continue}}return null},t}(p),g=function(){function e(){}return e.parsers=[],e.list=[],e.Register=function(e,t,n){var r,i,s,o;this.list.push({name:n,code:e[0]});for(s=0,o=e.length;s<o;s++)r=e[s],i={},i.ext=r.toLowerCase(),i.parser=t,i.title=n,this.parsers.push(i);return!0},e.findParser=function(e){var t,n,r,i,s;t=e.toLowerCase(),s=this.parsers;for(r=0,i=s.length;r<i;r++){n=s[r];if(n.ext===t)return n.parser}return null},e.makePrintable=function(e){return e.Print=function(){var e,t,n,r;e="";for(n=0,r=this.length;n<r;n++)t=this[n],e+=t.toStr()+"\r\n";return e},e},e.List=function(){return this.list},e.Parse=function(t,n){var r,s;return r=new i(n),s=e.findParser(t),s===null?null:(s=new s,s.init(),e.makePrintable(s.tokenize(r)))},e}(),b=function(){function e(e,t){this.font=e,this.size=t}return e.prototype.colors=new Object,e.prototype.get=function(e){return this.colors[e]!=null?this.colors[e]:null},e.prototype.set=function(e,t){return this.colors[e]=t,this},e}(),S=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.Create=function(e,t,n){var r;return t==null&&(t="Courier New"),n==null&&(n=13),r=this.Find(e),new r(t,n)},t.prototype.List=function(){var e,t,n,r,i;e=[],i=this.data;for(n=0,r=i.length;n<r;n++)t=i[n],e.push({code:t.code,name:t.title});return e},t}(f),E=new S,t=function(e){function t(e,n){this.font=e,this.size=n,this.set("text-normal",new w("#9b6f46")),this.set("text-keyword",new w("#cda772")),this.set("text-outlined",new w("#7187a3")),this.set("text-string",new w("#8f9d69")),this.set("text-comment",new w("#615e64")),this.set("text-directive",new w("#c86952","bold")),this.set("text-specialSymbol",new w("#c86952","bold")),this.set("bg",new w("#141414","solid")),t.__super__.constructor.call(this,this.font,this.size)}return nt(t,e),t}(b),E.Register("aptana",t,"Aptana"),U=function(e){function t(e,n){this.font=e,this.size=n,this.set("text-normal",new w),this.set("text-keyword",new w("#0000FF")),this.set("text-outlined",new w("#008080")),this.set("text-string",new w("#800000")),this.set("text-comment",new w("#008000")),this.set("text-directive",new w("#000080","bold")),this.set("text-specialSymbol",new w("#000000","bold")),this.set("bg",new w("#FFFFFF","solid")),t.__super__.constructor.call(this,this.font,this.size)}return nt(t,e),t}(b),E.Register("vs2010",U,"VS 2010"),L=function(){function e(){this.outlinedWords=[],this.analyzers=[],this.keywords=[],this.registerAnalyzer=function(e){return this.analyzers.push(e)},this.registerAnalyzers=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(this.registerAnalyzer(t));return i},this.registerKeyword=function(e){return this.keywords.push(e)},this.registerKeywords=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(this.registerKeyword(t));return i},this.registerOutlinedWord=function(e){return this.outlinedWords.push(e)},this.registerOutlinedWords=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(this.registerOutlinedWord(t));return i},this.beforeTokenFlush=function(e,t){var n;return t instanceof q?(n=t.content,this.keywords.some(function(e){return n===e})?new _(n):this.outlinedWords.some(function(e){return e===n})?new H(n):new P(n)):t}}return e.prototype.init=function(){return this.registerAnalyzer(new c),this.registerAnalyzer(new C),this.registerAnalyzer(new h),this.registerAnalyzer(new k)},e.prototype.tokenize=function(e){var t,n,r,i=this;r=new Array,t=function(e){if(e===null)return;return e=i.beforeTokenFlush(r,e),r.push(e)},n=null,n=this.analyzeState(n,e,r,t);while(e.readNext())n=this.analyzeState(n,e,r,t);return t(n),r.length>0&&!(r[r.length-1]instanceof D)&&r.push(new D),r},e.prototype.analyzeState=function(e,t,n,r){var i,s,o,u;u=this.analyzers;for(s=0,o=u.length;s<o;s++){i=u[s];if(!i.match(t,e,n))continue;return e=i.performAction(e,t,n,r),e==null&&(e=null),e}return e==null&&(e=new q),e.addChar(t.current()),e},e}(),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.init=function(){return t.__super__.init.call(this),this.registerAnalyzers([new R,new a]),this.registerKeywords(["if","then","else","unless","and","new","return","try","catch","finally","throw","or","is","isnt","not","break","continue","by","of","where","when","until","for","in","while","delete","instanceof","typeof","switch","super","extends","class","case","default","do","function","with","const","let","debugger","enum","export","import","native","__extends","__hasProp"])},t}(L),g.Register(["coffee","coffeescript"],s,"Coffee Script"),T=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.match=function(e,t,n){return t===null&&e.current()==="#"},t.prototype.performAction=function(e,t,n,r){return t.readUntilCharsLast(!1,"\r","\n"),r(new j("#"+t.buffer)),e},t}(e),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.init=function(){return t.__super__.init.call(this),this.registerAnalyzers([new o,new u,new T,new a]),this.registerKeywords(["abstract","as","base","bool","break","byte","case","catch","char","checked","class","const","continue","decimal","default","delegate","do","double","else","enum","event","explicit","extern","false","finally","fixed","float","for","foreach","goto","if","implicit","in","int","interface","internal","is","lock","long","namespace","new","null","object","operator","out","override","params","private","protected","public","readonly","ref","return","sbyte","sealed","short","sizeof","stackalloc","static","string","struct","switch","this","throw","true","try","typeof","uint","ulong","unchecked","unsafe","ushort","using","var","virtual","void","volatile","while"]),this.registerOutlinedWords(["String","Boolean","Int32","Int16","Int64","Double","StringBuilder","Object","KeyValuePair","List","Array","Dictionary","HashSet"])},t}(L),g.Register(["cs","csharp","c#"],n,"C#"),l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.init=function(){return t.__super__.init.call(this),this.registerAnalyzers([new o,new u,new a]),this.registerKeywords(["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","do","double","else","enum","extends","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","internal","is","long","native","new","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","try","void","volatile","while"]),this.registerOutlinedWords(["string","int","object"])},t}(L),g.Register(["java"],l,"Java"),y=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nt(t,e),t.prototype.init=function(){return t.__super__.init.call(this),this.registerAnalyzers([new R,new a]),this.registerKeywords(["BEGIN","END","alias","and","begin","break","case","class","def","defined","do","else","elsif","end","ensure","false","for","if","module","next","nil","not","or","redo","rescue","retry","return","self","super","private","then","true","undef","unless","until","when","while","yield","__FILE__","__LINE__"]),this.registerOutlinedWords(["print"])},t}(L),g.Register(["rb","ruby"],y,"Ruby"),A=function(){function e(e,t){this.type=e!=null?e:"(null)",this.content=t!=null?t:""}return e.prototype.code=function(){return this.type},e.prototype.addChar=function(e){return this.content+=e},e.prototype.toStr=function(){return this.type.toString()+": "+this.content.toString()},e}(),q=function(e){function t(e){this.content=e!=null?e:"",t.__super__.constructor.call(this,"undefined",this.content)}return nt(t,e),t}(A),F=function(e){function t(e){this.content=e!=null?e:"",t.__super__.constructor.call(this,"space",this.content)}return nt(t,e),t}(A),D=function(e){function t(e){this.content=e!=null?e:"",t.__super__.constructor.call(this,"new-line",this.content)}return nt(t,e),t}(A),M=function(e){function t(e){this.content=e!=null?e:"",t.__super__.constructor.call(this,"delimiter",this.content)}return nt(t,e),t}(A),O=function(e){function t(e){this.content=e!=null?e:"",t.__super__.constructor.call(this,"comment",this.content)}return nt(t,e),t}(A),B=function(e){function t(e){this.content=e!=null?e:"",t.__super__.constructor.call(this,"padding",this.content)}return nt(t,e),t}(A),I=function(e){function t(e){this.content=e!=null?e:"",t.__super__.constructor.call(this,"string",this.content)}return nt(t,e),t}(A),_=function(e){function t(e){this.content=e!=null?e:"",t.__super__.constructor.call(this,"keyword",this.content)}return nt(t,e),t}(A),P=function(e){function t(e){this.content=e!=null?e:"",t.__super__.constructor.call(this,"normal",this.content)}return nt(t,e),t}(A),H=function(e){function t(e){this.content=e!=null?e:"",t.__super__.constructor.call(this,"outlined",this.content)}return nt(t,e),t}(A),j=function(e){function t(e){this.content=e!=null?e:"",t.__super__.constructor.call(this,"directive",this.content)}return nt(t,e),t}(A),N=function(){function e(){this.transform=function(e,t,n,i,s){var o,u,a,f,l,c,h,p,v,m,y,b,w;i==null&&(i=[]),s==null&&(s=null),u=s,u==null&&(u=this.mergeSettings(u)),p=g.Parse(e,t);if(p===null)return console.log("snip2me: extension `"+e+"` is not supported"),null;a=document.getElementById("pre4debug"),a!=null&&(a.innerHTML=p.Print()),o=document.createElement("canvas"),h=E.Create(n,s.font,s.size),l=new r(o,p,h,u);for(y=0,b=i.length;y<b;y++){c=i[y],v=d.Create(o,c,u,h);if(v==null)break;v.withChild(l),l=v}return w=l.measure(),m=w[0],f=w[1],o.width=m,o.height=f,l.paint(),o.toDataURL()},this.getPaintersFromElement=function(e){var t,n,r,i,s,o,u,a,f,l,c;i="data-snip-painter-",n=[],c=e.attributes;for(u=0,f=c.length;u<f;u++){r=c[u];if(r.name.indexOf(i)!==0)continue;o={},o.num=parseInt(r.name.substring(i.length)),o.val=r.value,n.push(o)}n.sort(function(e,t){return t.num-e.num}),s=[];for(a=0,l=n.length;a<l;a++)t=n[a],s.push(t.val);return s},this.transformElement=function(e){var t,n,r,i;return t=e.getAttribute("data-snip-lang"),i=e.getAttribute("data-snip-scheme"),n=e.getAttribute("data-snip-gist"),r=this.getPaintersFromElement(e),n==null?this.transformNonGist(e,t,i,r):this.transformGist(e,t,i,n,r)},this.transformNonGist=function(e,t,n,r){var i,s;return s=this.transform(t,e.childNodes[0].nodeValue,n,r,this.readConfFromElement(e)),s===null?!1:(i=s.toImg(),e.parentNode.replaceChild(i,e),!0)},this.transformGist=function(e,t,n,r,i){return!1},this.findAllElements=function(e){var t,n,r,i,s;r=[],t=document.getElementsByTagName("*");for(i=0,s=t.length;i<s;i++)n=t[i],n.getAttribute(e)!=null&&r.push(n);return r},this.defaults={minWidth:0,font:"Courier New",size:12},this.readConfFromElement=function(e){var t,n,r,i,s,o;n="data-snip-conf-",r={},o=e.attributes;for(i=0,s=o.length;i<s;i++){t=o[i];if(t.name.indexOf(n)!==0)continue;r[t.name.substring(n.length).dashToCamel()]=t.value}return this.mergeSettings(r)},this.mergeSettings=function(e){return this.mergeObjs(this.defaults,e)},this.isInt=function(e){return typeof e=="number"&&e%1===0},this.mergeObjs=function(e,t){var n,r,i,s,o,u;n={},u=Object.keys(e);for(s=0,o=u.length;s<o;s++){r=u[s],i=null;try{e[r].constructor===Object?i=this.mergeObjs(e[r],t[r]):t!=null&&t[r]!=null?i=t[r]:i=e[r]}catch(a){i=e[r]}this.isInt(e[r])?n[r]=parseInt(i):n[r]=i}return n},this.isElement=function(e){return typeof HTMLElement=="object"?e instanceof HTMLElement:e&&typeof e=="object"&&e.nodeType===1&&typeof e.nodeName=="string"},this.canRun=!1,this.runChecked=!1,this.checkVersions=function(e,t){switch(e){case"opera":return t>=12.1;case"chrome":return t>=22;case"safari":return t>=5.1;case"firefox":return t>=15;case"msie":return t>=9;default:return!0}}}return e.prototype.me=function(){var e,t,n,r;if(!this.isCompatible())return!1;t=this.findAllElements("data-snip-lang");for(n=0,r=t.length;n<r;n++)e=t[n],this.transformElement(e);return!0},e.prototype.compile=function(e){return this.isCompatible()?this.isElement(e)?this.transformElement(e):this.transform.apply(snip2,arguments):!1},e.prototype.setSettings=function(e){return this.defaults=this.mergeSettings(e)},e.prototype.isCompatible=function(){var e,t,n,r;return this.runChecked?this.canRun:(this.runChecked=!0,t=navigator.appName,r=navigator.userAgent,n=null,e=r.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),e&&(n=r.match(/version\/([\.\d]+)/i))!==null&&(e[2]=n[1]),e!=null?e=[e[1],e[2]]:e=[t,navigator.appVersion,"-?"],this.canRun=this.checkVersions(e[0].toLowerCase(),parseFloat(e[1])),this.canRun||console.log("snip2me is not compatible with current browser"),this.canRun)},e.prototype.parsers=function(){return g.List()},e.prototype.schemes=function(){return E.List()},e}(),W=typeof exports!="undefined"&&exports!==null?exports:this,W.snip2=new N,z=function(){return W.snip!=null&&W.snip2.setSettings.apply(W.snip2,[W.snip]),W.snip2.me.apply(W.snip2)},window.addEventListener?window.addEventListener("load",z,!1):window.attachEvent("onload",z)}).call(this);